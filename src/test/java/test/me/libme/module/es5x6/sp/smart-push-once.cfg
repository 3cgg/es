input {
    jdbc {
        id => "smart-push-once"
        add_field =>{
            "cppEventSource" => "smart-push-once"
        }
		jdbc_driver_library => "sqlserver-sqljdbc4-4.0.jar"
		jdbc_driver_class => "com.microsoft.sqlserver.jdbc.SQLServerDriver"
		jdbc_connection_string => "jdbc:sqlserver://pro.chuangxin360.com:8345;DatabaseName=pro_tech_service_market_zhongbao"
		jdbc_user => "sa"
		jdbc_password => "123@abcd"
		statement_filepath => "/work/data-import/smart-push/smart-push.sql"
		last_run_metadata_path => "/work/data-import/smart-push/smart-push-once.last.meta"
		use_column_value => true
		tracking_column => "modifyDate"
		lowercase_column_names => false
    }
}
filter {

}
output {

    if [cppEventSource]=="smart-push-once" {
        stdout { codec => rubydebug }
        elasticsearch {
            hosts => [ "localhost:9200" ]
            user => "elastic"
            password => "changeme"
            index => "cpp-smart-push-index"
            document_type => "smart-push"
            document_id => "%{id}"
            action => "update"
            doc_as_upsert => true
        }

    }
}
